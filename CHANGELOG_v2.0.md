# æ›´æ–°æ—¥å¿— - v2.0

## æ–°å¢åŠŸèƒ½

### 1. é«˜ä¼¤å®³å­å¼¹è§†è§‰å¢å¼º âœ¨

æ–¹å—æ•Œäººçš„å­å¼¹ç°åœ¨æ›´åŠ æ˜¾çœ¼ï¼Œçªå‡ºå…¶é«˜ä¼¤å®³ç‰¹æ€§ï¼š

**è§†è§‰ç‰¹æ•ˆ**:
- å°ºå¯¸å¢å¤§ï¼šä»12x12åƒç´ å¢è‡³18x18åƒç´ ï¼ˆ50%æ›´å¤§ï¼‰
- å¤šå±‚å…‰æ™•ï¼šæ©™è‰²ã€é»„è‰²æ¸å˜çš„å¤šå±‚å…‰æ™•æ•ˆæœ
- æ˜äº®æ ¸å¿ƒï¼šç™½çƒ­çš„ä¸­å¿ƒï¼Œææ˜“è¯†åˆ«
- é¢œè‰²æ–¹æ¡ˆï¼šæ©™é»„è‰²ç³»ï¼Œä¸æ™®é€šçº¢è‰²å­å¼¹æ˜æ˜¾åŒºåˆ«

**æŠ€æœ¯å®ç°**:
- Bulletç±»æ„é€ å‡½æ•°æ–°å¢`damage`å‚æ•°
- æ ¹æ®damageå€¼è‡ªåŠ¨é€‰æ‹©æ¸²æŸ“æ ·å¼
- draw_bulletæ–¹æ³•æ”¯æŒä¸‰ç§å­å¼¹ç±»å‹ï¼š
  1. ç©å®¶å­å¼¹ï¼ˆé’è‰²ï¼‰
  2. æ•Œäººæ™®é€šå­å¼¹ï¼ˆçº¢è‰²ï¼Œä¼¤å®³1ï¼‰
  3. æ•Œäººé«˜ä¼¤å®³å­å¼¹ï¼ˆæ©™é»„è‰²ï¼Œä¼¤å®³2+ï¼‰

**æµ‹è¯•**:
è¿è¡Œ `python test_bullet_visual.py` æŸ¥çœ‹ä¸‰ç§å­å¼¹çš„è§†è§‰å¯¹æ¯”ã€‚

---

### 2. ä¸ƒé˜¶æ®µéš¾åº¦ç³»ç»Ÿ ğŸ®

å®Œå…¨é‡æ„çš„éš¾åº¦ç³»ç»Ÿï¼Œæä¾›æ›´ç»†è‡´çš„æ¸¸æˆä½“éªŒï¼š

**ç³»ç»Ÿç‰¹ç‚¹**:
- **7ä¸ªç‹¬ç«‹é˜¶æ®µ**ï¼Œæ¯ä¸ªé˜¶æ®µ20ç§’
- æ¯ä¸ªé˜¶æ®µæœ‰**ç‹¬ç«‹çš„åˆ·æ–°é¢‘ç‡**
- æ¯ä¸ªé˜¶æ®µæœ‰**ç‹¬ç«‹çš„æ•Œäººæƒé‡**
- é˜¶æ®µåˆ‡æ¢æ—¶æ˜¾ç¤ºé˜¶æ®µåç§°ï¼ˆå¦‚"Stage 4 - Hard"ï¼‰

**é˜¶æ®µæ¦‚è§ˆ**:

| é˜¶æ®µ | æ—¶é•¿ | åˆ·æ–°é—´éš” | åœ†å½¢ | ä¸‰è§’ | æ–¹å— | ç‰¹ç‚¹ |
|-----|------|---------|------|------|------|------|
| Stage 1 - Easy | 0-20s | 90å¸§ | 80% | 20% | 0% | å…¥é—¨ï¼Œæ— æ–¹å— |
| Stage 2 - Normal | 20-40s | 75å¸§ | 70% | 25% | 5% | æ–¹å—ç™»åœº |
| Stage 3 - Getting Hard | 40-60s | 60å¸§ | 60% | 30% | 10% | åŠ é€Ÿ |
| Stage 4 - Hard | 60-80s | 50å¸§ | 50% | 30% | 20% | å›°éš¾ |
| Stage 5 - Very Hard | 80-100s | 40å¸§ | 40% | 35% | 25% | å¾ˆéš¾ |
| Stage 6 - Extreme | 100-120s | 35å¸§ | 30% | 40% | 30% | æé™ |
| Stage 7 - HELL | 120s+ | 30å¸§ | 20% | 40% | 40% | åœ°ç‹± |

**é…ç½®ç»“æ„**:

```json
"difficulty": {
    "level_up_interval_seconds": 20,
    "max_level": 6,
    "stages": [
        {
            "level": 0,
            "name": "Stage 1 - Easy",
            "spawn_delay": 90,
            "circle_weight": 0.8,
            "triangle_weight": 0.2,
            "square_weight": 0.0
        },
        // ... æ›´å¤šé˜¶æ®µ
    ]
}
```

**ä»£ç å˜æ›´**:
- `game_manager.py`ï¼š
  - æ–°å¢`max_difficulty_level`å±æ€§
  - é‡æ„`update()`ä¸­çš„éš¾åº¦å‡çº§é€»è¾‘
  - ä»stagesæ•°ç»„åŠ¨æ€è¯»å–é…ç½®
  - æ›´æ–°éš¾åº¦è­¦å‘Šæ˜¾ç¤ºé˜¶æ®µåç§°
- `spawn_enemy()`ï¼šä»å½“å‰é˜¶æ®µè¯»å–æƒé‡
- ç§»é™¤æ—§çš„çº¿æ€§éš¾åº¦ç³»ç»Ÿï¼ˆ`spawn_delay_decrease`ç­‰ï¼‰

---

## é…ç½®æ”¹è¿›

### config.json æ›´æ–°

**æ–°å¢é…ç½®é¡¹**:
```json
"difficulty": {
    "max_level": 6,
    "stages": [...]  // 7ä¸ªé˜¶æ®µçš„è¯¦ç»†é…ç½®
}
```

**ç§»é™¤é…ç½®é¡¹**:
```json
// ä»¥ä¸‹é…ç½®å·²è¢«stagesç³»ç»Ÿå–ä»£
"initial_spawn_delay": 90,
"min_spawn_delay": 30,
"spawn_delay_decrease": 10
```

**æ•Œäººé…ç½®**:
- ç§»é™¤ `spawn_weight` ä»å„æ•Œäººé…ç½®ï¼ˆç°åœ¨ç”±stagesæ§åˆ¶ï¼‰
- ä¿ç•™æ•ŒäººåŸºç¡€å±æ€§ï¼ˆhealth, speed, bullet_damageç­‰ï¼‰

---

## æ–‡æ¡£æ›´æ–°

### æ–°å¢æ–‡æ¡£

1. **DIFFICULTY_STAGES.md** ğŸ“˜
   - è¯¦ç»†çš„é˜¶æ®µç³»ç»Ÿè¯´æ˜
   - æ¯ä¸ªé˜¶æ®µçš„é…ç½®è¯¦è§£
   - è‡ªå®šä¹‰é…ç½®æ•™ç¨‹
   - æ¸¸æˆå¹³è¡¡å»ºè®®
   - æŠ€æœ¯å®ç°è¯´æ˜

### æ›´æ–°æ–‡æ¡£

1. **CONFIG_GUIDE.md** ğŸ“
   - æ›´æ–°éš¾åº¦é…ç½®éƒ¨åˆ†
   - æ·»åŠ 7é˜¶æ®µç³»ç»Ÿè¯´æ˜
   - æ›´æ–°è°ƒè¯•å»ºè®®ï¼ˆé’ˆå¯¹é˜¶æ®µç³»ç»Ÿï¼‰
   - æ·»åŠ é˜¶æ®µé…ç½®æ¦‚è§ˆè¡¨

2. **README.md** ğŸ“–
   - æ›´æ–°Featureåˆ—è¡¨ï¼ˆä¸‰ç§æ•Œäººã€7é˜¶æ®µç³»ç»Ÿï¼‰
   - æ‰©å±•æ¸¸æˆæœºåˆ¶è¯´æ˜
   - è¯¦ç»†çš„æ•Œäººç‰¹æ€§è¡¨
   - æ·»åŠ é«˜ä¼¤å®³å­å¼¹è¯´æ˜
   - æ›´æ–°é…ç½®ç« èŠ‚
   - æ·»åŠ æµ‹è¯•è„šæœ¬è¯´æ˜

---

## æµ‹è¯•å·¥å…·

### test_bullet_visual.py ğŸ”
æ–°å¢å¯è§†åŒ–æµ‹è¯•è„šæœ¬ï¼Œå±•ç¤ºä¸‰ç§å­å¼¹çš„è§†è§‰æ•ˆæœå¯¹æ¯”ï¼š
- ç©å®¶å­å¼¹ï¼ˆé’è‰²ï¼Œ12x12ï¼‰
- æ•Œäººæ™®é€šå­å¼¹ï¼ˆçº¢è‰²ï¼Œ12x12ï¼Œä¼¤å®³1ï¼‰
- æ–¹å—é«˜ä¼¤å®³å­å¼¹ï¼ˆæ©™é»„è‰²ï¼Œ18x18ï¼Œä¼¤å®³2ï¼‰

è¿è¡Œï¼š
```bash
python test_bullet_visual.py
```

---

## æŠ€æœ¯ç»†èŠ‚

### Bulletç±»é‡æ„

**æ„é€ å‡½æ•°**:
```python
def __init__(self, x, y, speed_x, speed_y, color=(255, 255, 0), 
             is_enemy=False, damage=1):
```
- æ–°å¢ `damage` å‚æ•°ï¼ˆé»˜è®¤1ï¼‰
- æ ¹æ®damageè‡ªåŠ¨è°ƒæ•´å°ºå¯¸ï¼ˆdamage>1æ—¶ä¸º18x18ï¼‰

**draw_bulletæ–¹æ³•**:
```python
def draw_bullet(self, color, is_enemy, damage=1):
```
- æ–°å¢ `damage` å‚æ•°
- ä¸‰ç§æ¸²æŸ“è·¯å¾„ï¼š
  1. `damage > 1`: å¤§å‹é«˜ä¼¤å®³å­å¼¹
  2. `is_enemy=True`: æ™®é€šæ•Œäººå­å¼¹
  3. `is_enemy=False`: ç©å®¶å­å¼¹

### SquareEnemyæ›´æ–°

**å°„å‡»æ–¹æ³•**:
```python
bullet = Bullet(self.rect.centerx, self.rect.centery, dx, dy, 
              (255, 150, 0), is_enemy=True, damage=self.damage)
```
- ä½¿ç”¨æ–°çš„damageå‚æ•°
- è‡ªåŠ¨ç»§æ‰¿self.damageï¼ˆé»˜è®¤2ï¼‰

### GameManageræ›´æ–°

**åˆå§‹åŒ–**:
```python
stages = config.get('difficulty', 'stages')
self.base_spawn_delay = stages[0]['spawn_delay']
self.max_difficulty_level = config.get('difficulty', 'max_level')
```

**éš¾åº¦å‡çº§**:
```python
if self.difficulty_level < self.max_difficulty_level:
    self.difficulty_level += 1
    new_stage = stages[self.difficulty_level]
    self.enemy_spawn_delay = new_stage['spawn_delay']
```

**æ•Œäººç”Ÿæˆ**:
```python
current_stage = stages[min(self.difficulty_level, len(stages) - 1)]
circle_weight = current_stage['circle_weight']
triangle_weight = current_stage['triangle_weight']
square_weight = current_stage['square_weight']
```

---

## æ¸¸æˆå¹³è¡¡è°ƒæ•´

### æ–¹å—æ•Œäººå­å¼¹
- **æ›´æ˜¾çœ¼**: 50%æ›´å¤§ï¼Œæ›´äº®çš„é¢œè‰²
- **æ›´å±é™©**: 2ç‚¹ä¼¤å®³ï¼ˆç©å®¶åªæœ‰3è¡€ï¼‰
- **æ›´å¯é¢„æµ‹**: æ˜æ˜¾çš„è§†è§‰æç¤ºï¼Œç©å®¶æœ‰æ—¶é—´ååº”

### éš¾åº¦æ›²çº¿
- **æ¸è¿›å¼**: å‰40ç§’é€‚åº”æœŸï¼Œæ–¹å—å¦å…‹å‡ºç°ç‡ä½
- **ä¸­æœŸæŒ‘æˆ˜**: 60-100ç§’ï¼Œæ–¹å—å¦å…‹æˆä¸ºå¸¸è§å¨èƒ
- **æé™æµ‹è¯•**: 100ç§’åï¼Œ40%æ–¹å—å¦å…‹ + 40%ä¸‰è§’æ•Œäºº

### é˜¶æ®µè®¾è®¡å“²å­¦
1. **Stage 1-2**: å­¦ä¹ æ¸¸æˆæœºåˆ¶ï¼Œç†Ÿæ‚‰æ•Œäººç±»å‹
2. **Stage 3-4**: æµ‹è¯•åŸºç¡€æŠ€èƒ½ï¼Œéœ€è¦åˆç†ä½¿ç”¨å¼ºåŒ–
3. **Stage 5-6**: é«˜éš¾åº¦æŒ‘æˆ˜ï¼Œéœ€è¦ç²¾ç¡®èµ°ä½
4. **Stage 7**: ç»ˆæè€ƒéªŒï¼Œåªæœ‰æœ€ç†Ÿç»ƒçš„ç©å®¶èƒ½é•¿æœŸç”Ÿå­˜

---

## å‘åå…¼å®¹æ€§

### é…ç½®è¿ç§»
æ—§é…ç½®æ–‡ä»¶å°†æ— æ³•ç›´æ¥ä½¿ç”¨ï¼Œå› ä¸ºï¼š
- ç§»é™¤äº† `initial_spawn_delay`, `min_spawn_delay`, `spawn_delay_decrease`
- ç§»é™¤äº†å„æ•Œäººçš„ `spawn_weight`

**è¿ç§»æ–¹æ¡ˆ**:
1. ä½¿ç”¨æ–°çš„ `config.json` æ¨¡æ¿
2. æˆ–æ‰‹åŠ¨æ·»åŠ  `stages` æ•°ç»„å’Œ `max_level`

### ä»£ç å…¼å®¹æ€§
- æ‰€æœ‰æ—§çš„æ¸¸æˆé€»è¾‘ä¿æŒä¸å˜
- Bulletç±»å‘åå…¼å®¹ï¼ˆdamageé»˜è®¤ä¸º1ï¼‰
- æ•Œäººç±»ä¿æŒä¸å˜
- ç©å®¶ç±»ä¿æŒä¸å˜

---

## å·²çŸ¥é—®é¢˜

æ— é‡å¤§é—®é¢˜ã€‚

---

## æœªæ¥æ”¹è¿›å»ºè®®

1. **æ›´å¤šå­å¼¹ç±»å‹**:
   - ç©¿é€å­å¼¹ï¼ˆdamage=1ï¼Œå¯ç©¿é€å¤šä¸ªæ•Œäººï¼‰
   - çˆ†ç‚¸å­å¼¹ï¼ˆAOEä¼¤å®³ï¼‰
   - è¿½è¸ªå­å¼¹

2. **æ›´å¤šæ•Œäººç±»å‹**:
   - é£è¡Œæ•Œäººï¼ˆZå­—å½¢ç§»åŠ¨ï¼‰
   - åˆ†è£‚æ•Œäººï¼ˆæ­»äº¡ååˆ†è£‚æˆå°æ•Œäººï¼‰
   - Bossæ•Œäººï¼ˆç‰¹å®šé˜¶æ®µå‡ºç°ï¼‰

3. **éš¾åº¦è‡ªé€‚åº”**:
   - æ ¹æ®ç©å®¶è¡¨ç°åŠ¨æ€è°ƒæ•´éš¾åº¦
   - æ­»äº¡åé™ä½éš¾åº¦

4. **è§†è§‰å¢å¼º**:
   - ç²’å­æ•ˆæœï¼ˆçˆ†ç‚¸ã€ç«èŠ±ï¼‰
   - å±å¹•éœ‡åŠ¨
   - æ›´å¤šå…‰æ•ˆ

5. **æˆå°±ç³»ç»Ÿ**:
   - ç”Ÿå­˜æ—¶é—´æˆå°±
   - å‡»æ€æ•°æˆå°±
   - å®Œç¾é—ªé¿æˆå°±

---

## å¼€å‘è€…å¤‡æ³¨

### è°ƒè¯•åŠŸèƒ½
åœ¨ `game_manager.py` çš„ `update()` æ–¹æ³•ä¸­ï¼Œæ›¾æ·»åŠ è°ƒè¯•è¾“å‡ºï¼ˆç°å·²ç§»é™¤ï¼‰ï¼š
```python
# æ¯3ç§’è¾“å‡ºæ•Œäººç»Ÿè®¡
print(f"[DEBUG] æ•Œäººç»Ÿè®¡: åœ†å½¢={circle_count}, ä¸‰è§’={triangle_count}, æ–¹å—={square_count}")

# éš¾åº¦æå‡æ—¶è¾“å‡ºé˜¶æ®µä¿¡æ¯
print(f"[éš¾åº¦æå‡] {new_stage['name']} - åˆ·æ–°é—´éš”={new_stage['spawn_delay']}å¸§")
```

å¦‚éœ€è°ƒè¯•ï¼Œå¯ä»¥å–æ¶ˆæ³¨é‡Šè¿™äº›è¡Œã€‚

### æ€§èƒ½è€ƒè™‘
- é˜¶æ®µç³»ç»Ÿå¯¹æ€§èƒ½æ— å½±å“ï¼ˆåªæ˜¯æ¯20ç§’è¯»å–ä¸€æ¬¡é…ç½®ï¼‰
- é«˜ä¼¤å®³å­å¼¹ç•¥å¤§ï¼Œä½†ä¸ä¼šæ˜¾è‘—å½±å“æ€§èƒ½
- æœ€å¤šåŒæ—¶å­˜åœ¨çš„å­å¼¹æ•°é‡å—spawn_delayé™åˆ¶

### æµ‹è¯•è¦†ç›–
- âœ… å­å¼¹è§†è§‰æ•ˆæœï¼štest_bullet_visual.py
- âœ… æ•Œäººç”Ÿæˆæ¦‚ç‡ï¼štest_spawn.py
- âœ… åŸºç¡€æ¸¸æˆåŠŸèƒ½ï¼štest_game.py
- âš ï¸ å¾…è¡¥å……ï¼šé˜¶æ®µåˆ‡æ¢æµ‹è¯•ã€é«˜ä¼¤å®³å­å¼¹ç¢°æ’æµ‹è¯•

---

## è‡´è°¢

æ„Ÿè°¢ç©å®¶åé¦ˆï¼Œæœ¬æ¬¡æ›´æ–°ä¸»è¦åŸºäºä»¥ä¸‹å»ºè®®ï¼š
- "æ–¹å—æ•Œäººçš„å­å¼¹åº”è¯¥æ›´æ˜¾çœ¼" âœ… å·²å®ç°
- "éœ€è¦æ›´ç»†è‡´çš„éš¾åº¦è°ƒæ•´" âœ… å·²å®ç°

---

**ç‰ˆæœ¬**: v2.0  
**æ›´æ–°æ—¥æœŸ**: 2025-10-25  
**ä¸‹ä¸€ç‰ˆæœ¬è®¡åˆ’**: Bossæ•Œäººã€ç²’å­æ•ˆæœã€æˆå°±ç³»ç»Ÿ
